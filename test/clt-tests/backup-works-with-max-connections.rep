You can use regex in the output sections.
More info here: https://github.com/manticoresoftware/clt#refine
Time taken for test: 459ms
â€“â€“â€“ input â€“â€“â€“
cp test/clt-tests/config/manticore-vip.conf /etc/manticoresearch/manticore.conf
â€“â€“â€“ output â€“â€“â€“
â€“â€“â€“ duration: 3ms (0.65%) â€“â€“â€“
â€“â€“â€“ input â€“â€“â€“
searchd
â€“â€“â€“ output â€“â€“â€“
Manticore 6.2.13 5de07b0ae@24022215 dev (columnar 2.2.5 a5342a1@240217) (secondary 2.2.5 a5342a1@240217) (knn 2.2.5 a5342a1@240217)
Copyright (c) 2001-2016, Andrew Aksyonoff
Copyright (c) 2008-2016, Sphinx Technologies Inc (http://sphinxsearch.com)
Copyright (c) 2017-2024, Manticore Software LTD (https://manticoresearch.com)
[44:36.358] [29] using config file '/etc/manticoresearch/manticore.conf' (372 chars)...
starting daemon version '6.2.13 5de07b0ae@24022215 dev (columnar 2.2.5 a5342a1@240217) (secondary 2.2.5 a5342a1@240217) (knn 2.2.5 a5342a1@240217)' ...
listening on 127.0.0.1:9312 for sphinx and http(s)
listening on 127.0.0.1:9306 for mysql
listening on 127.0.0.1:9307 for VIP mysql
listening on 127.0.0.1:9308 for sphinx and http(s)
listening on 127.0.0.1:9313 for VIP sphinx and http(s)
â€“â€“â€“ duration: 107ms (23.31%) â€“â€“â€“
â€“â€“â€“ input â€“â€“â€“
manticore-backup --version
â€“â€“â€“ output â€“â€“â€“
Copyright (c) 2023-2024, Manticore Software LTD (https://manticoresearch.com)
Manticore Backup version: 1.3.5
â€“â€“â€“ duration: 16ms (3.49%) â€“â€“â€“
â€“â€“â€“ input â€“â€“â€“
mysql -h0 -P9306 < test/clt-tests/dumps/tables.sql
â€“â€“â€“ output â€“â€“â€“
â€“â€“â€“ duration: 8ms (1.74%) â€“â€“â€“
â€“â€“â€“ input â€“â€“â€“
curl localhost:9312/sql?mode=raw -d 'query=debug sleep 10' &
â€“â€“â€“ output â€“â€“â€“
[1] 75
â€“â€“â€“ duration: 4ms (0.87%) â€“â€“â€“
â€“â€“â€“ input â€“â€“â€“
mysql -h0 -P9307 -e 'show tables'
â€“â€“â€“ output â€“â€“â€“
+---------------------+-------------+
| Index               | Type        |
+---------------------+-------------+
| distributed_index   | distributed |
| rt_with_columnar    | rt          |
| rt_without_columnar | rt          |
+---------------------+-------------+
â€“â€“â€“ duration: 6ms (1.31%) â€“â€“â€“
â€“â€“â€“ input â€“â€“â€“
mysql -h0 -P9307 -e 'show create table distributed_index'
â€“â€“â€“ output â€“â€“â€“
+-------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| Table             | Create Table                                                                                                                                  |
+-------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| distributed_index | CREATE TABLE distributed_index type='distributed' local='rt_with_columnar' agent='127.0.0.1:9312:plain_with_columnar, plain_without_columnar' |
+-------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
â€“â€“â€“ duration: 6ms (1.31%) â€“â€“â€“
â€“â€“â€“ input â€“â€“â€“
mysql -h0 -P9307 -e 'show create table rt_with_columnar'
â€“â€“â€“ output â€“â€“â€“
+------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table            | Create Table                                                                                                                                                           |
+------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| rt_with_columnar | CREATE TABLE rt_with_columnar (
id bigint,
title text,
category_id integer,
price float,
description string attribute engine='columnar',
tags multi,
attributes json
) |
+------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
â€“â€“â€“ duration: 8ms (1.74%) â€“â€“â€“
â€“â€“â€“ input â€“â€“â€“
mysql -h0 -P9307 -e 'show create table rt_without_columnar'
â€“â€“â€“ output â€“â€“â€“
+---------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table               | Create Table                                                                                                                                            |
+---------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| rt_without_columnar | CREATE TABLE rt_without_columnar (
id bigint,
title text,
category_id integer,
price float,
description string attribute,
tags multi,
attributes json
) |
+---------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
â€“â€“â€“ duration: 4ms (0.87%) â€“â€“â€“
â€“â€“â€“ input â€“â€“â€“
ls -lt /tmp/backup-*
â€“â€“â€“ output â€“â€“â€“
ls: cannot access '/tmp/backup-*': No such file or directory
â€“â€“â€“ duration: 4ms (0.87%) â€“â€“â€“
â€“â€“â€“ input â€“â€“â€“
manticore-backup --backup-dir=/tmp
â€“â€“â€“ output â€“â€“â€“
Copyright (c) 2023-2024, Manticore Software LTD (https://manticoresearch.com)
Manticore config file: /etc/manticoresearch/manticore.conf
Tables to backup: all tables
Backup dir: /tmp
Manticore config
endpoint =  http://127.0.0.1:9313
Manticore versions:
manticore: 6.2.13 5de07b0ae@24022215 dev
columnar: 2.2.5 a5342a1@240217
secondary: 2.2.5 a5342a1@240217
knn: 2.2.5 a5342a1@240217
buddy: 2.1.7
[93m2024-02-22 11:44:36[0m [Info] Starting the backup...
[93m2024-02-22 11:44:36[0m [Info] Backing up config files...
[93m2024-02-22 11:44:36[0m [Info]   config files - [92mOK[0m
[93m2024-02-22 11:44:36[0m [Info] Backing up global state files...
[93m2024-02-22 11:44:36[0m [Info]   global state files â€“ [92mOK[0m
[93m2024-02-22 11:44:36[0m [Info] Backing up tables...
[93m2024-02-22 11:44:36[0m [Info]   distributed_index (distributed)...
[93m2024-02-22 11:44:36[0m [Info]   [93mSKIP[0m
[93m2024-02-22 11:44:36[0m [Info]   rt_with_columnar (rt) [2.915K]...
[93m2024-02-22 11:44:36[0m [Info]    [92mOK[0m
[93m2024-02-22 11:44:36[0m [Info]   rt_without_columnar (rt) [2.789K]...
[93m2024-02-22 11:44:36[0m [Info]    [92mOK[0m
[93m2024-02-22 11:44:36[0m [Info] Running sync
[93m2024-02-22 11:44:36[0m [Info]  [92mOK[0m
[93m2024-02-22 11:44:36[0m [Info] You can find backup here: /tmp/backup-20240222114436
[93m2024-02-22 11:44:36[0m [Info] Elapsed time: 0.01s
[93m2024-02-22 11:44:36[0m [Info] Done
â€“â€“â€“ duration: 288ms (62.75%) â€“â€“â€“
â€“â€“â€“ input â€“â€“â€“
ls -lh /tmp/backup-*
â€“â€“â€“ output â€“â€“â€“
total 16K
drwxr-xr-x. 4 root root 4.0K Feb 22 11:44 config
drwxr-xr-x. 4 root root 4.0K Feb 22 11:44 data
drwxr-xr-x. 2 root root 4.0K Feb 22 11:44 state
-rw-r--r--. 1 root root  176 Feb 22 11:44 versions.json
â€“â€“â€“ duration: 5ms (1.09%) â€“â€“â€“
